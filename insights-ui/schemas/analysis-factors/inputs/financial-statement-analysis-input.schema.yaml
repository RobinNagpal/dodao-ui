$schema: 'http://json-schema.org/draft-07/schema#'
type: object
additionalProperties: false
properties:
  name:
    type: string
    description: 'The full name of the company or REIT being analyzed (e.g., AvalonBay Communities Inc.).'
  symbol:
    type: string
    description: 'The stock ticker symbol of the company or REIT (e.g., AVB).'
  industryKey:
    type: string
    description: 'The broad industry the stock belongs to (e.g., REITS).'
  industryName:
    type: string
    description: 'Name of the industry'
  industryDescription:
    type: string
    description: 'A few lines explaining the industry'
  subIndustryKey:
    type: string
    description: 'The specific sub-industry of the stock (e.g., OFFICE_REITS).'
  subIndustryName:
    type: string
    description: 'Name of the sub-industry'
  subIndustryDescription:
    type: string
    description: 'A few lines explaining the sub-industry'
  categoryKey:
    type: string
    enum: ['BusinessAndMoat', 'FinancialStatementAnalysis', 'PastPerformance', 'FutureGrowth', 'FairValue']
    description: 'The category being analyzed.'
  factorAnalysisArray:
    type: array
    description: 'Array of factors to analyze for this category.'
    items:
      type: object
      properties:
        factorAnalysisKey:
          type: string
          description: 'Unique identifier of the factor.'
        factorAnalysisTitle:
          type: string
          description: 'Readable title of the factor.'
        factorAnalysisDescription:
          type: string
          description: 'Short, 1â€“2 sentence plain-English explanation of what this factor represents and why it matters to investors.'
        factorAnalysisMetrics:
          type: string
          description: 'Optional comma-separated list of key metrics used for evaluating this factor.'
      required:
        - factorAnalysisKey
        - factorAnalysisTitle
        - factorAnalysisDescription
  # Market Snapshot - comprehensive market data
  marketSummary:
    type: object
    description: 'Complete market summary data from stock analyzer'

  # Financial Statements - last 4 quarters + latest annual
  incomeStatement:
    type: object
    description: 'Income statement data including meta, last 4 quarters, and latest annual'
    properties:
      meta:
        type: object
        description: 'Metadata for income statement'
      last4Quarters:
        type: array
        description: 'Last 4 quarterly income statement periods'
        items:
          type: object
      latestAnnual:
        type: [object, 'null']
        description: 'Most recent annual income statement period'

  balanceSheet:
    type: object
    description: 'Balance sheet data including meta, last 4 quarters, and latest annual'
    properties:
      meta:
        type: object
        description: 'Metadata for balance sheet'
      last4Quarters:
        type: array
        description: 'Last 4 quarterly balance sheet periods'
        items:
          type: object
      latestAnnual:
        type: [object, 'null']
        description: 'Most recent annual balance sheet period'

  cashFlow:
    type: object
    description: 'Cash flow statement data including meta, last 4 quarters, and latest annual'
    properties:
      meta:
        type: object
        description: 'Metadata for cash flow statement'
      last4Quarters:
        type: array
        description: 'Last 4 quarterly cash flow periods'
        items:
          type: object
      latestAnnual:
        type: [object, 'null']
        description: 'Most recent annual cash flow period'

  ratios:
    type: object
    description: 'Financial ratios data including meta, latest annual, and last 4 quarters'
    properties:
      meta:
        type: object
        description: 'Metadata for ratios'
      latestAnnual:
        type: [object, 'null']
        description: 'Most recent annual ratios period'
      last4Quarters:
        type: array
        description: 'Last 4 quarterly ratios periods'
        items:
          type: object

  dividends:
    type: object
    description: 'Dividend data including meta, summary, and last 4 payments'
    properties:
      meta:
        type: object
        description: 'Metadata for dividends'
      summary:
        type: object
        description: 'Dividend summary information'
      last4Payments:
        type: array
        description: 'Last 4 dividend payment records'
        items:
          type: object

required:
  - name
  - symbol
  - industryKey
  - subIndustryKey
  - categoryKey
  - factorAnalysisArray
  - industryDescription
  - subIndustryDescription
  - industryName
  - subIndustryName
  - marketSummary
  - incomeStatement
  - balanceSheet
  - cashFlow
  - ratios
  - dividends
